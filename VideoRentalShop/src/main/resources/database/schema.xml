<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                                       http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.5.xsd">

    <changeSet id="create-employee-table" author="kasia">
        <sql dbms="postgresql" splitStatements="true" stripComments="true">
            <![CDATA[
                CREATE TABLE IF NOT EXISTS employee (
                    id BIGINT PRIMARY KEY NOT NULL GENERATED BY DEFAULT AS IDENTITY,
                    first_name VARCHAR(255) NOT NULL,
                    last_name VARCHAR(255) NOT NULL,
                    email VARCHAR(255) NOT NULL,
                    password VARCHAR(255) NOT NULL,
                    phone_number VARCHAR(255) NOT NULL,
                    join_date DATE NOT NULL,
                    role VARCHAR(255) NOT NULL,
                    hour_salary DECIMAL(10,2) NOT NULL
                );
            ]]>
        </sql>
    </changeSet>

    <changeSet id="create-shift-table" author="kasia">
        <sql dbms="postgresql" splitStatements="true" stripComments="true">
            <![CDATA[
                CREATE TABLE IF NOT EXISTS shift (
                    id BIGINT PRIMARY KEY NOT NULL GENERATED BY DEFAULT AS IDENTITY,
                    employee_id BIGINT NOT NULL,
                    date DATE NOT NULL,
                    hours BIGINT NOT NULL,
                    CONSTRAINT fk_employee
                        FOREIGN KEY(employee_id)
                        REFERENCES employee(id)

                );
            ]]>
        </sql>
    </changeSet>

    <changeSet id="create-movie-table" author="kasia">
        <sql dbms="postgresql" splitStatements="true" stripComments="true">
            <![CDATA[
                CREATE TABLE IF NOT EXISTS movie (
                    id BIGINT PRIMARY KEY NOT NULL GENERATED BY DEFAULT AS IDENTITY,
                    name VARCHAR(255) NOT NULL,
                    price DECIMAL(10,2) NOT NULL,
                    last_update_date DATE NOT NULL,
                    is_on_sale BOOLEAN NOT NULL,
                    is_movie_active BOOLEAN NOT NULL

                );
            ]]>
        </sql>
    </changeSet>

    <changeSet id="create-client-table" author="kasia">
        <sql dbms="postgresql" splitStatements="true" stripComments="true">
            <![CDATA[
                CREATE TABLE IF NOT EXISTS client (
                    id BIGINT PRIMARY KEY NOT NULL GENERATED BY DEFAULT AS IDENTITY,
                    first_name VARCHAR(255) NOT NULL,
                    last_name VARCHAR(255) NOT NULL,
                    registration_date DATE NOT NULL,
                    phone_number VARCHAR(255) NOT NULL,
                    email VARCHAR(255) NOT NULL

                );
            ]]>
        </sql>
    </changeSet>

    <changeSet id="create-rented-movie-table" author="kasia">
        <sql dbms="postgresql" splitStatements="true" stripComments="true">
            <![CDATA[
                CREATE TABLE IF NOT EXISTS rented_movie (
                        id BIGINT PRIMARY KEY NOT NULL GENERATED BY DEFAULT AS IDENTITY,
                        client_id BIGINT NOT NULL,
                        movie_id BIGINT NOT NULL,
                        rent_date DATE NOT NULL,
                        CONSTRAINT fk_client_id
                            FOREIGN KEY(client_id)
                            REFERENCES client(id),
                        CONSTRAINT fk_movie_id
                            FOREIGN KEY(movie_id)
                            REFERENCES movie(id)
                );
            ]]>
        </sql>
    </changeSet>

    <changeSet id="create-rental-history-table" author="kasia">
        <sql dbms="postgresql" splitStatements="true" stripComments="true">
            <![CDATA[
                CREATE TABLE IF NOT EXISTS rental_history (
                        id BIGINT PRIMARY KEY NOT NULL GENERATED BY DEFAULT AS IDENTITY,
                        client_id BIGINT NOT NULL,
                        movie_id BIGINT NOT NULL,
                        start_rent_date DATE NOT NULL,
                        end_rent_date DATE NOT NULL,
                        number_of_days_rented BIGINT NOT NULL,
                        total_price DECIMAL(10,2) NOT NULL,
                        CONSTRAINT fk_client_id
                            FOREIGN KEY(client_id)
                            REFERENCES client(id),
                        CONSTRAINT fk_movie_id
                            FOREIGN KEY(movie_id)
                            REFERENCES movie(id)
                );
            ]]>
        </sql>
    </changeSet>

    <changeSet id="create-archive-movie-table" author="kasia">
        <sql dbms="postgresql" splitStatements="true" stripComments="true">
            <![CDATA[
                CREATE TABLE IF NOT EXISTS archive_movie (
                    id BIGINT PRIMARY KEY NOT NULL GENERATED BY DEFAULT AS IDENTITY,
                    name VARCHAR(255) NOT NULL,
                    price DECIMAL(10,2) NOT NULL,
                    last_update_date DATE NOT NULL,
                    is_movie_active BOOLEAN NOT NULL

                );
            ]]>
        </sql>
    </changeSet>

</databaseChangeLog>